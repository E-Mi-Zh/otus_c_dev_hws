# logger

## Задание
Написать библиотеку для журналирования, выводящую в лог-файл заданные сообщения с заданным
уровнем важности (один из DEBUG, INFO, WARNING, ERROR) и с местом в коде, в котором была вызвана
функция журналирования. Для уровня error необходимо также выводить текущий стек вызовов.

## Задачи:
1. Создать статическую библиотеку, содержащую интерфейс инициализации (для указания логфайла)
и интерфейс журналирования.
2. Создать тестовое консольное приложение, демонстрирующее работу библиотеки.

## Требования к коду:
* код должен компилироваться без предупреждений с ключами компилятора -Wall -Wextra -Wpedantic -std=c11
* потокобезопасность;
* возможность использования при аварийных ситуациях (например malloc, вернувший NULL).

## Вспомогательные материалы
1. Пример библиотеки, реализующей ожидаемый интерфейс журналирования: [c-logger](https://github.com/yksz/c-logger/blob/59d77982d7b900433d8b2bb1b4e17f661aa53e75/src/logger.h#L17-L22)
2. [backtrace(3)](https://man7.org/linux/man-pages/man3/backtrace.3.html)

1. [wttr.in help](https://wttr.in/:help)
2. [JSON](https://www.json.org/json-en.html) - список библиотек внизу страницы.
3. [Native JSON Benchmark](https://www.json.org/json-en.html)
4. [libcurl example - getinmemory.c](https://www.json.org/json-en.html)

# Реализация
Требования: компилятор Си11, стандартная библиотека (проверялось в Linux, GCC 13.2.0, libc 2.38).

Сборка: `cmake . && make`.

Использование: `./logger_test`, часть лога выводится в stderr, часть в файл syslog.txt.

## Описание работы
Библиотека журналирования состоит из заголовка logger.h и реализации вспомогательных функций logger.c
Можно было бы обойтись одним заголовком и реализовать всё средствами препроцессора (с макросом __VA_ARGS__),
но т.к. требовалась печать в файл и потокобезопасность (и реализация в виде статической библиотеки), то пришлось
сделать вывод отдельной функцией.

Перед использованием вызывается loginit с именем файла (может быть NULL, в этом случае печать будет вестись в stderr).
Реализовано 4 уровня логирования, по умолчанию они отключены, включаются функцией loglevel_on.
Для вывода сообщения используются макросы LOGERROR, LOGDEBUG и т.д.

## Что можно улучшить
1. Учитывать дефайн DEBUG, отключающий или включающий печать (все уровни).
2. Выводить временную метку с точностью до миллисекунд.
3. Выводить идентификатор потока.
4. Добавить модули, которые могут отдельно настраиваться (например с названиями подсистемы программы - [App], [DSP], [BT] и т.д.)ж
5. Добавить вывод с цветом.
6. Добавить поддержку syslog.

