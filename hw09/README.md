# asm to C

## Задание
Изучить предоставленный ассемблерный листинг, понять, над какой структурой данных в нём происходит
работа и написать аналогичную программу на C, повторяющую вывод оригинальной программы.

## Задачи:
1. Изучить ассемблерный листинг.
2. Создано консольное приложение, выводящее при запуске тот же текст, что и предоставленная в
листинге main.asm программа.
3. Указать, каким типичным функциям высшего порядка соответствуют
ассемблерные процедуры m и f.
4. Оптимизировать процедуры m и f в ассемблерном коде.
5. Исправить утечки памяти под структуры данных в ассемблерном коде.

## Требования к коду:
* приложение работает с той же структурой данных, что и оригинальная программа;
* код компилируется без предупреждений с ключами компилятора -Wall -Wextra -Wpedantic -std=c11.

## Вспомогательные материалы
1. [System V ABI](https://wiki.osdev.org/System_V_ABI#x86-64)
2. [NASM Intel x86 Assembly Language Cheat Sheet](https://www.bencode.net/blob/nasmcheatsheet.pdf)

# Реализация

Требования: компилятор Си11, стандартная библиотека (проверялось в Linux, GCC 13.2.0, libc 2.38).

Сборка: `make`.

Использование: `./c-prog`.

## Описание работы
Судя по исходному листингу на ассемблере, программа работает со связанным списком. Сперва он создаётся из заранее заданных элементов. Затем выводится на печать с использованием функции высшего порядка m (map), которой передаётся
аргументом функция печати print_int. Далее происходит фильтрация исходного списка функцией f (аналог функции высшего порядка filter) и вывод на печать.

## Что можно улучшить
1. Пытался добиться как можно более полного соответствия Си кода исходному, но 100%-го не удалось (возможно из-за оптимизации).
2. Утечки памяти - в Си коде добавил освобождение списков (и всё равно Valgrind ругается на функцию добавления элемента), в Ассемблере не исправил.
3. Функция filter сейчас возвращает результат через входной параметр, а не через return.
