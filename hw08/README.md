# weather

## Задание
Написать программу, скачивающую с помощью [libcurl](https://curl.se/libcurl) и разбирающую с помощью
произвольной сторонней библиотеки для JSON в C текущие погодные данные с [API wttr.in](https://wttr.in/Moscow?format=j1)
для заданного аргументом командной строки города.

## Задачи:
1. Выбрать библиотеку для работы с JSON в C.
2. Создать консольное приложение принимающее, аргументом командной строки название города.
3. Используя libcurl получить JSON текст прогноза.
4. Провести парсинг JSON и вывести на экран прогноз погоды на текущий день: текстовое описание погоды,
направление и скорость ветра, температуру.

## Требования к коду:
* для получения данных использовать libcurl (динамическая линковка);
* библиотеку для парсинга JSON прилинковать статически.

## Вспомогательные материалы
1. [wttr.in help](https://wttr.in/:help)
2. [JSON](https://www.json.org/json-en.html) - список библиотек внизу страницы.
3. [Native JSON Benchmark](https://www.json.org/json-en.html)
4. [libcurl example - getinmemory.c](https://www.json.org/json-en.html)


# Реализация

Требования: компилятор Си11, стандартная библиотека (проверялось в Linux, GCC 13.2.0, libc 2.38).

Сборка: `make`.

Использование: `weather place`.

## Описание работы
Программа проверяет наличие и корректность входных параметров. Формирует URL для скачивания с
wttr.in для заданного места, с помощью libcurl получает данные.
Для парсинга JSON используется библиотека [parson](https://github.com/kgabis/parson), выбрал её
за маленький размер, простоту сборки и относительную простоту работы.
Полученный JSON парсится, проводится простейшая проверка его корректности (наличие и непустота нужных объектов).
Затем полученный прогноз погоды выводится на экран.

## Что можно улучшить
1. Текущая реализация выводит состояние погоды "сейчас", а не прогноз погоды на какой-то момент времени.
Формально это не соответствует заданию, исправлять не стал, т.к. с т.зр. работы с JSON ничего не поменяется.
2. Валидация JSON согласно схемы. Текущая библиотека полностью не поддерживает, но позволяет провести
базовую проверку корректности.
3. Заменить библиотек парсинга на другую: несмотря на то что с виду parson показалась удобной,
фактически получение объектов и значений довольно громоздко.
